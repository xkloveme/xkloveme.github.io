---
layout: post
title: '2022-12-16PVE显卡直通'
date: 2022-12-16 09:19:41
tags:黑苹果
---

在 PVE 中安装黑苹果（也称为 Hackintosh）是一种使用虚拟机在非苹果电脑上运行 macOS 的方法。尽管这是可行的，但有一些注意事项需要考虑。
首先，在 PVE 中安装黑苹果需要先安装 PVE 本身。这可以通过在 Linux 操作系统上安装 PVE 软件包来完成。安装完成后，你可以使用 PVE 管理界面来创建新的虚拟机。

在创建虚拟机时，你需要准备好 macOS 安装映像。你可以从苹果官网下载正版 macOS，或者从第三方网站下载非官方的安装映像。

接下来，你需要选择虚拟机的 CPU 和内存规格。为了获得最佳性能，建议使用尽可能多的 CPU 和内存。你还需要为虚拟机创建磁盘。这可以使用 PVE 管理界面中的“存储”部分来完成。

最后，你需要在虚拟机中安装 Bootloader。这可以使用开源的 Bootloader，例如 Clover。你需要将 Clover 安装在虚拟机的 EFI 分区中，以便在启动时能够引导 macOS。

> 在 PVE 中安装黑苹果时，你可能希望能够直接使用物理机器的显卡而不是虚拟机的软件显卡。这种方法称为“显卡直通”。

在 PVE 中实现显卡直通有一些挑战，因为虚拟机需要访问显卡的硬件，而虚拟机是运行在物理机器上的。然而，这是可行的，并且可以通过以下步骤来实现：

首先，你需要确保你的显卡和 PVE 是兼容的。有些显卡可能无法在 PVE 中正常工作。

接下来，你需要在虚拟机中安装显卡驱动程序。这可能需要在虚拟机中手动安装。

在虚拟机的 BIOS 设置中，你需要启用 IOMMU。这将允许虚拟机直接访问物理机器的硬件，包括显卡。

在 PVE 管理界面中，你需要启用虚拟机的“PCI 显卡直通”功能。这将使虚拟机能够使用物理机器的显卡。

最后，你需要在虚拟机的 macOS 系统中启用显卡驱动程序。这可能需要在终端中运行特定的命令。